{"ast":null,"code":"import _asyncToGenerator from \"/Users/kylenewins/Documents/The Moat/the_moat_io/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nexport default class DefaultResponseValidator {\n  validateResponse(response) {\n    return _asyncToGenerator(function* () {\n      switch (response.status) {\n        case 401:\n          throw new Error(\"Bad or expired token. This can happen if the user revoked a token or the access token has expired. You should re-authenticate the user.\");\n\n        case 403:\n          const body = yield response.text();\n          throw new Error(`Bad OAuth request (wrong consumer key, bad nonce, expired timestamp...). Unfortunately, re-authenticating the user won't help here. Body: ${body}`);\n\n        case 429:\n          throw new Error(\"The app has exceeded its rate limits.\");\n\n        default:\n          if (!response.status.toString().startsWith('20')) {\n            const body = yield response.text();\n            throw new Error(`Unrecognised response code: ${response.status} - ${response.statusText}. Body: ${body}`);\n          }\n\n      }\n    })();\n  }\n\n}","map":{"version":3,"sources":["/Users/kylenewins/Documents/The Moat/the_moat_io/node_modules/@spotify/web-api-ts-sdk/dist/mjs/responsevalidation/DefaultResponseValidator.js"],"names":["DefaultResponseValidator","validateResponse","response","status","Error","body","text","toString","startsWith","statusText"],"mappings":";AAAA,eAAe,MAAMA,wBAAN,CAA+B;AACpCC,EAAAA,gBAAgB,CAACC,QAAD,EAAW;AAAA;AAC7B,cAAQA,QAAQ,CAACC,MAAjB;AACI,aAAK,GAAL;AACI,gBAAM,IAAIC,KAAJ,CAAU,yIAAV,CAAN;;AACJ,aAAK,GAAL;AACI,gBAAMC,IAAI,SAASH,QAAQ,CAACI,IAAT,EAAnB;AACA,gBAAM,IAAIF,KAAJ,CAAW,6IAA4IC,IAAK,EAA5J,CAAN;;AACJ,aAAK,GAAL;AACI,gBAAM,IAAID,KAAJ,CAAU,uCAAV,CAAN;;AACJ;AACI,cAAI,CAACF,QAAQ,CAACC,MAAT,CAAgBI,QAAhB,GAA2BC,UAA3B,CAAsC,IAAtC,CAAL,EAAkD;AAC9C,kBAAMH,IAAI,SAASH,QAAQ,CAACI,IAAT,EAAnB;AACA,kBAAM,IAAIF,KAAJ,CAAW,+BAA8BF,QAAQ,CAACC,MAAO,MAAKD,QAAQ,CAACO,UAAW,WAAUJ,IAAK,EAAjG,CAAN;AACH;;AAZT;AAD6B;AAehC;;AAhByC","sourcesContent":["export default class DefaultResponseValidator {\n    async validateResponse(response) {\n        switch (response.status) {\n            case 401:\n                throw new Error(\"Bad or expired token. This can happen if the user revoked a token or the access token has expired. You should re-authenticate the user.\");\n            case 403:\n                const body = await response.text();\n                throw new Error(`Bad OAuth request (wrong consumer key, bad nonce, expired timestamp...). Unfortunately, re-authenticating the user won't help here. Body: ${body}`);\n            case 429:\n                throw new Error(\"The app has exceeded its rate limits.\");\n            default:\n                if (!response.status.toString().startsWith('20')) {\n                    const body = await response.text();\n                    throw new Error(`Unrecognised response code: ${response.status} - ${response.statusText}. Body: ${body}`);\n                }\n        }\n    }\n}\n"]},"metadata":{},"sourceType":"module"}